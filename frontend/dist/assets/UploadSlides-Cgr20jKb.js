import{r as a,c as x,j as e}from"./index-D9lXXRMH.js";function b(){const[p,i]=a.useState([]),[l,h]=a.useState("68cced26157d87e24fee03ce"),[r,c]=a.useState(""),[d,u]=a.useState([]);a.useEffect(()=>{n()},[l]);const n=async()=>{try{const s=await x.get(`/classes/${l}`);s.status==="ok"&&s.class&&u(s.class.slides||[])}catch(s){console.error("Failed to fetch class data:",s)}},f=async()=>{const s=new FormData;for(const t of p)s.append("slides",t);c("Uploading...");try{const t=await x.upload(`/classes/${l}/slides`,s);c(t.status==="ok"?"Uploaded!":t.message||"Failed"),t.status==="ok"&&(await n(),i([]))}catch{c("Network error")}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"btn-ghost",onClick:()=>window.history.back(),children:"← Back to Dashboard"}),e.jsx("h1",{className:"text-2xl font-bold",children:"Upload Slides"})]}),e.jsxs("div",{className:"max-w-2xl mx-auto card p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Upload Slides"}),e.jsx("label",{className:"text-sm text-textMuted",children:"Class ID"}),e.jsx("input",{className:"input w-full mb-3",value:l,onChange:s=>h(s.target.value)}),e.jsxs("div",{className:"border border-border rounded p-4 bg-card",children:[e.jsx("input",{type:"file",accept:"image/*,.pdf",multiple:!0,onChange:s=>i([...s.target.files])}),e.jsx("p",{className:"text-xs text-textMuted mt-2",children:"Use thumbnails, we will lazy load."})]}),e.jsx("button",{className:"btn mt-4",onClick:f,children:"Upload"}),r&&e.jsx("p",{className:"text-sm text-textMuted mt-2",children:r}),d.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3",children:["Uploaded Slides (",d.length,")"]}),e.jsx("div",{className:"space-y-2",children:d.map((s,t)=>{var o,m;return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-card rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded flex items-center justify-center",children:(o=s.mime)!=null&&o.includes("image")?"🖼️":"📄"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:(m=s.filename)==null?void 0:m.split("/").pop()}),e.jsx("p",{className:"text-xs text-textMuted",children:s.mime})]})]}),e.jsx("a",{href:`/storage/${s.filename}`,target:"_blank",rel:"noopener noreferrer",className:"btn-ghost text-sm",children:"View"})]},s._id||t)})})]})]})]})}export{b as default};
